-- // Создаем базу данных

create database exam10

-- Создаем таблицы для бд

create table stock (
	id integer primary key,
	name text not null,
	adress text not null
)

create table brands (
	id integer primary key,
	name text not null
)

create table categories (
	id integer primary key,
	type text not null
)

create table products (
	id integer primary key,
	name text not null,
	brand_id integer,
	foreign key (brand_id)
	references brands(id),
	category_id integer not null,
	foreign key (category_id)
	references categories(id)
)


create table counterparty (
	id integer primary key,
	name text not null
)


create table supplies (
	id integer primary key,
	stock_id integer,
	foreign key (stock_id)
	references stock(id),
	product_id integer not null,
	foreign key (product_id)
	references products(id),
	counterparty_id integer not null,
	foreign key (counterparty_id)
	references counterparty(id),
	date_arrival date not null,
	quantity integer not null,
	operation_type text not null
)


create table moving (
	id integer primary key,
	product_id integer not null,
	foreign key (product_id)
	references products(id),
	stock_id_take integer,
	foreign key (stock_id_take)
	references stock(id),
	stock_id_give integer,
	foreign key (stock_id_give)
	references stock(id),
	quantity integer not null,
	date_give date not null
)

-- Здесь я заполняю таблицы


insert into brands values
(1, 'Samsung'),
(2, 'Apple'),
(3, 'LG'),
(4, 'Xiaomi'),
(5, 'Lenovo')
select * from brands

insert into categories values
(1, 'Monitor'),
(2, 'MobilePhone'),
(3, 'Computer'),
(4, 'SmartWatch'),
(5, 'EarPhones')
select * from categories


insert into stock values
(1, 'Top stock', 'Nazarbayeva 28'),
(2, 'Stock Altyn orda', 'Rayimbekova 127 a'),
(3, 'Sclad na Tole Bi', 'Tole Bi 12'),
(4, 'Ramstor', 'Kunayeva 47'),
(5, 'Mega Stock', 'Makatayeva 2')

select * from stock


insert into products values
(1, 'iPHONE 14', 1, 1),
(2, 'iPHONE 13', 1, 2),
(3, 'iPHONE 12', 1, 3),
(4, 'iPHONE 11', 1, 4),
(5, 'iPHONE 10', 1, 5),
(6, 'iPHONE 14 БЕЛЫЙ', 1, 1),
(7, 'iPHONE 13 БЕЛЫЙ', 1, 2),
(8, 'iPHONE 12 БЕЛЫЙ', 1, 3),
(9, 'iPHONE 11 БЕЛЫЙ', 1, 4),
(10, 'iPHONE 10 БЕЛЫЙ', 1, 5),
(11, 'iPHONE 14 ЧЕРНЫЙ', 2, 1),
(12, 'iPHONE 13 ЧЕРНЫЙ', 2, 2),
(13, 'iPHONE 12 ЧЕРНЫЙ', 2, 3),
(14, 'iPHONE 11 ЧЕРНЫЙ', 2, 4),
(15, 'iPHONE 10 ЧЕРНЫЙ', 2, 5),
(16, 'iPHONE 14 ФИОЛЕТНЫЙ', 2, 1),
(17, 'iPHONE 13 ФИОЛЕТНЫЙ', 2, 2),
(18, 'iPHONE 12 ФИОЛЕТНЫЙ', 2, 3),
(19, 'iPHONE 11 ФИОЛЕТНЫЙ', 2, 4),
(20, 'iPHONE 10 ФИОЛЕТНЫЙ', 2, 5),
(21, 'iPHONE 14 ОРАНЖЕВЫЙ', 3, 1),
(22, 'iPHONE 13 ОРАНЖЕВЫЙ', 3, 2),
(23, 'iPHONE 12 ОРАНЖЕВЫЙ', 3, 3),
(24, 'iPHONE 11 ОРАНЖЕВЫЙ', 3, 4),
(25, 'iPHONE 10 ОРАНЖЕВЫЙ', 3, 5),
(26, 'iPHONE 14 ЙОД', 3, 1),
(27, 'iPHONE 13 ЙОД', 3, 2),
(28, 'iPHONE 12 ЙОД', 3, 3),
(29, 'iPHONE 11 ЙОД', 3, 4),
(30, 'iPHONE 10 ЙОД', 3, 5),
(31, 'iPHONE 14 СЕРЫЙ', 4, 1),
(32, 'iPHONE 13 СЕРЫЙ', 4, 2),
(33, 'iPHONE 12 СЕРЫЙ', 4, 3),
(34, 'iPHONE 11 СЕРЫЙ', 4, 4),
(35, 'iPHONE 10 СЕРЫЙ', 4, 5),
(36, 'iPHONE 14 КРАСНЫЙ', 4, 1),
(37, 'iPHONE 13 КРАСНЫЙ', 4, 2),
(38, 'iPHONE 12 КРАСНЫЙ', 4, 3),
(39, 'iPHONE 11 КРАСНЫЙ', 4, 4),
(40, 'iPHONE 10 КРАСНЫЙ', 4, 5),
(41, 'iPHONE 14 ГОЛУБОЙ', 5, 1),
(42, 'iPHONE 13 ГОЛУБОЙ', 5, 2),
(43, 'iPHONE 12 ГОЛУБОЙ', 5, 3),
(44, 'iPHONE 11 ГОЛУБОЙ', 5, 4),
(45, 'iPHONE 10 ГОЛУБОЙ', 5, 5),
(46, 'iPHONE 14 ЗЕЛЕНЫЙ', 5, 1),
(47, 'iPHONE 13 ЗЕЛЕНЫЙ', 5, 2),
(48, 'iPHONE 12 ЗЕЛЕНЫЙ', 5, 3),
(49, 'iPHONE 11 ЗЕЛЕНЫЙ', 5, 4),
(50, 'iPHONE 10 ЗЕЛЕНЫЙ', 5, 5)
select * from products


insert into moving values
( 1, 7, 1, 2, 8, '2021-06-07'),
( 2, 17, 2, 3, 7, '2021-04-06'),
( 3, 27, 5, 2, 6, '2020-06-15'),
( 4, 37, 3, 5, 6, '2021-11-19'),
( 5, 47, 4, 2, 7, '2020-09-19'),
( 6, 12, 2, 1, 1, '2020-10-19'),
( 7, 22, 5, 3, 3, '2021-03-18'),
( 8, 32, 3, 1, 7, '2021-01-09'),
( 9, 42, 4, 5, 8, '2020-10-19'),
( 10, 45, 4, 3, 7, '2020-02-28')

select * from moving



insert into counterparty values
(1, 'Sergey'),
(2, 'Mikhail'),
(3, 'Rustem'),
(4, 'Igor'),
(5, 'Samat')
select * from counterparty

insert into supplies values
(1, 2, 1, 2, '2017-09-17', 77, 'пришел'),
(2, 2, 2, 2, '2017-01-14' , 124, 'пришел'),
(3, 2, 3, 2, '2017-02-17', 77, 'пришел'),
(4, 2, 4, 2, '2017-03-11' , 74, 'пришел'),
(5, 2, 5, 2, '2018-04-4', 77, 'пришел'),
(6, 2, 6, 2, '2017-03-14' , 24, 'пришел'),
(7, 2, 7, 2, '2018-05-27', 19, 'пришел'),
(8 ,2, 8, 2, '2018-06-14' , 188, 'выдан'),
(9, 2, 9, 2, '2017-07-17', 76, 'выдан'),
(10,2,10, 2, '2016-01-5' , 12, 'выдан'),
(11, 1,  11, 3, '2017-09-17', 78, 'пришел'),
(12, 1,  12, 3, '2017-01-14' , 24, 'пришел'),
(13, 1,  13, 3, '2017-02-17', 7, 'пришел'),
(14, 1,  14, 3, '2017-03-11' , 4, 'выдан'),
(15, 1,  15, 3, '2017-04-4', 87, 'выдан'),
(16, 1,  16, 3, '2017-03-14' , 64, 'выдан'),
(17, 1,  17, 3,'2016-05-27', 89, 'выдан'),
(18, 3, 18, 3, '2016-06-14' , 88, 'выдан'),
(19, 3, 19, 3, '2017-07-17', 16, 'выдан'),
(20, 3,  20, 3, '2017-01-5' , 1, 'выдан'),
(21,3, 21, 1, '2017-08-17', 87, 'выдан'),
(22,3, 22, 1, '2016-03-14' , 24, 'пришел'),
(23,3, 23, 1, '2016-03-17', 87, 'пришел'),
(24,3, 24, 1, '2017-04-11' , 48, 'пришел'),
(25,3, 25, 1, '2017-12-24', 87, 'выдан'),
(26,3, 26, 1, '2016-08-24' , 84, 'пришел'),
(27,4,27, 1, '2016-06-07', 818, 'выдан'),
(28 , 4, 28, 1, '2016-09-15' , 888, 'выдан'),
(29, 4, 29, 1, '2016-11-07', 67, 'пришел'),
(30,4,30, 1, '2016-12-05' , 285, 'пришел'),
(31, 5, 31, 1, '2016-09-27', 687, 'выдан'),
(32, 5, 32, 1, '2016-08-04' , 84, 'пришел'),
(33, 5, 33, 1, '2016-08-07', 87, 'выдан'),
(34, 5, 34, 4, '2016-03-12' , 84, 'пришел'),
(35, 5, 35, 4, '2018-05-04', 97, 'пришел'),
(36, 5, 36, 4, '2018-11-04' , 46, 'пришел'),
(37, 5, 37, 5,'2018-10-17', 69, 'пришел'),
(38 ,5, 38, 5, '2018-12-14' , 68, 'пришел'),
(39, 2, 39, 5, '2018-06-27', 576, 'пришел'),
(40, 4, 40, 5, '2018-06-05' , 1, 'пришел'),
(41, 4, 41,4, '2018-07-27', 17, 'пришел'),
(42, 2, 42,4, '2018-03-24' , 74, 'пришел'),
(43, 1,  43,4, '2018-03-11', 77, 'пришел'),
(44, 3,  44,4, '2018-03-11' , 34, 'пришел'),
(45, 3,  45,4, '2018-08-04', 47, 'пришел'),
(46, 4,  46,4, '2018-03-03' , 24, 'пришел'),
(47, 4,  47,4, '2018-05-27', 169, 'пришел'),
(48, 3, 48,4, '2018-06-24' , 8, 'пришел'),
(49, 2,  49,4, '2018-07-18', 66, 'пришел'),
(50, 3, 50,4, '2018-01-5' , 157, 'пришел'),
(61, 3, 1, 3, '2017-09-17', 77, 'пришел'),
(62, 3, 2, 3, '2017-01-14' , 124, 'пришел'),
(63, 3, 3, 3, '2017-02-17', 77, 'пришел'),
(64, 3, 4, 3, '2017-03-11' , 74, 'пришел'),
(65, 3, 5, 4, '2018-04-4', 77, 'пришел'),
(66, 3, 6, 4, '2017-03-14' , 24, 'пришел'),
(67, 3, 7, 4, '2018-05-27', 19, 'пришел'),
(68 ,2, 8, 4, '2018-06-14' , 188, 'пришел'),
(69, 2, 9, 4, '2017-07-17', 76, 'пришел'),
(70,2,10, 5, '2016-01-5' , 12, 'пришел'),
(71, 2,  11, 5, '2017-09-17', 78, 'пришел'),
(72, 2,  12, 5, '2017-01-14' , 24, 'пришел'),
(73, 2,  13, 5, '2017-02-17', 7, 'пришел'),
(74, 1,  14, 1, '2017-03-11' , 4, 'пришел'),
(75, 1,  15, 1, '2017-04-4', 87, 'пришел'),
(76, 1,  16, 1, '2017-03-14' , 64, 'пришел'),
(77, 1,  17, 1,'2016-05-27', 89, 'пришел'),
(78, 3, 18, 2, '2016-06-14' , 88, 'пришел'),
(79, 3, 19, 2, '2017-07-17', 16, 'пришел'),
(80, 3,  20, 2, '2017-01-5' , 1, 'пришел'),
(81,3, 21, 1, '2017-08-17', 87, 'пришел'),
(82,4, 22, 4, '2016-03-14' , 24, 'пришел'),
(83,4, 23, 4, '2016-03-17', 87, 'пришел'),
(84,4, 24, 4, '2017-04-11' , 48, 'пришел'),
(85,3, 25, 4, '2017-12-24', 87, 'пришел'),
(86,4, 26, 1, '2016-08-24' , 84, 'пришел'),
(87,4,27, 3, '2016-06-07', 818, 'пришел'),
(88 , 4, 28, 3, '2016-09-15' , 888, 'пришел'),
(89, 5, 29, 4, '2016-11-07', 67, 'пришел'),
(90,5,30, 5, '2016-12-05' , 285, 'пришел'),
(91, 5, 31, 5, '2016-09-27', 687, 'пришел'),
(92, 1, 32, 5, '2016-08-04' , 84, 'пришел'),
(93, 5, 33, 4, '2016-08-07', 87, 'пришел'),
(94, 1, 34, 5, '2016-03-12' , 84, 'пришел'),
(95, 1, 35, 5, '2018-05-04', 97, 'пришел'),
(96, 1, 36, 5, '2018-11-04' , 46, 'пришел'),
(97, 1, 37, 5,'2018-10-17', 69, 'пришел'),
(98 ,1, 38, 3, '2018-12-14' , 68, 'пришел'),
(99, 1, 39, 3, '2018-06-27', 576, 'пришел'),
(100, 4, 40, 3, '2018-06-05' , 1, 'пришел'),
(51, 5, 41,4, '2018-07-27', 17, 'пришел'),
(52, 3, 42,4, '2018-03-24' , 74, 'пришел'),
(53, 2,  43,5, '2018-03-11', 77, 'пришел'),
(54, 2,  44,5, '2018-03-11' , 34, 'пришел'),
(55, 3,  45,5, '2018-08-04', 47, 'пришел'),
(56, 4,  46,5, '2018-03-03' , 24, 'пришел'),
(57, 5,  47,5, '2018-05-27', 169, 'пришел'),
(58, 3, 48,5, '2018-06-24' , 8, 'пришел'),
(59, 3,  49,5, '2018-07-18', 66, 'пришел'),
(60, 3, 50,5, '2018-01-5' , 157, 'пришел')



select * from supplies
